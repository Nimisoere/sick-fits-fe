{"version":3,"file":"static/webpack/static/development/pages/_app.js.42c0527cdd05868779a4.hot-update.js","sources":["webpack:///./components/RemoveFromCart.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { CURRENT_USER_QUERY } from './User';\n\nconst REMOVE_FROM_CART_MUTATION = gql`\n    mutation removeFromCart($id: ID!){\n        removeFromCart(id: $id){\n            id\n        }\n    }\n`\n\nconst BigButton = styled.button`\n    font-size: 3rem;\n    background: none;\n    border: none;\n    &:hover {\n        color: ${props => props.theme.red};\n        cursor: pointer;\n    }\n`\n\nclass RemoveFromCart extends Component {\n    static propTypes = {\n        id: PropTypes.string.isRequired\n    }\n\n    update = (cache, payload) => {\n        const data = cache.readQuery({\n            query: CURRENT_USER_QUERY\n        })\n        const cartItemId = payload.data.removeFromCart.id;\n        data.me.cart = data.me.cart.filter(cartItem => cartItem.id !== cartItemId);\n        cache.writeQuery({query: CURRENT_USER_QUERY, data})\n    }\n\n    render() {\n        const {id} = this.props;\n        return (\n            <Mutation update={this.update} mutation={REMOVE_FROM_CART_MUTATION} variables={{id}}>\n                {(removeFromCart, {loading, error}) => (\n                    <BigButton disabled={loading} onClick={() => removeFromCart().catch(err => alert(err.message))} title=\"Delete Item\">&times;</BigButton>\n                )}\n            </Mutation>\n        )\n    }\n}\n\nexport default RemoveFromCart\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAQA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AAIA;;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAKA;;;;AAvBA;AACA;AADA;AAEA;AADA;AACA;AAwBA;;;;A","sourceRoot":""}